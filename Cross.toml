[build.env]
passthrough = [
    "RUST_BACKTRACE",
    "OPENSSL_STATIC",
    "OPENSSL_DIR",
    "OPENSSL_INCLUDE_DIR",
]

[target.aarch64-unknown-linux-gnu]
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update",
    "apt-get install -y libssl-dev:arm64"
]

[target.aarch64-unknown-linux-musl]
image = "rustembedded/cross:aarch64-unknown-linux-musl"
pre-build = [
    "apt-get update",
    "apt-get install -y musl-tools pkg-config libssl-dev make perl"
]

[target.armv7-unknown-linux-musleabihf]
pre-build = [
    "dpkg --add-architecture armhf",
    "apt-get update",
    "apt-get install -y libssl-dev:armhf"
]

[target.i686-unknown-linux-gnu]
pre-build = [
    "dpkg --add-architecture i386",
    "apt-get update",
    "apt-get install -y libssl-dev:i386"
] 